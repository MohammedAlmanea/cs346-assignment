<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tasks</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../public/style.css" />
  </head>
  <body style="background-color: #eeeeee">
    <div align="center">
      <div
        class="container"
        style="
          background-color: #dddddd;
          margin-top: 10%;
          width: 600px;
          border-radius: 20px;
          padding: 8px;
        "
      >
        <h2>Things I Have to do</h2>
        <form action="/create" method="post">
          <input type="text" name="title" />
          <button type="submit" class="btn btn-dark">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-plus"
              viewBox="0 0 16 16"
            >
              <path
                d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"
              />
            </svg>
          </button>
        </form>
        <% if(tasks.length > 0) {%>
        <div>
          <ul>
            <% tasks.forEach(task=>{ %> 
                <% if (task.id === id) { %>
            <li>
              <h4>Edit</h4>
              <form action="/tasks/update/<%=task.id%>" method="post">
                <input type="text" name="title" value="<%=task.title%>" />
                <button type="submit">Edit</button>
              </form>
              <%} else {%>
            </li>
            <li>
              <%= task.title%>
              <a href="/tasks/update/<%=task.id%>">edit</a><br>
              <a href="/tasks/delete/<%=task.id%>?_method=delete" style = 'text-decoration: none;'>THROW IT IN THE TRASH CAN</a>
            </li>
            <%}})}%>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>
